<!--
  ~ This file is part of Hopsworks
  ~ Copyright (C) 2018, Logical Clocks AB. All rights reserved
  ~
  ~ Hopsworks is free software: you can redistribute it and/or modify it under the terms of
  ~ the GNU Affero General Public License as published by the Free Software Foundation,
  ~ either version 3 of the License, or (at your option) any later version.
  ~
  ~ Hopsworks is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
  ~ PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.
  ~ If not, see <https://www.gnu.org/licenses/>.
  -->

<div ng-controller="MainCtrl as mainCtrl">
    <div ng-include="'nav.html'"></div>


    <div id="wrapper" ng-class="{'toggled': projectCtrl.isClosed}" ng-controller="newStorageConnectorCtrl as newStorageConnectorCtrl">
        <div class="overlay"></div>

        <div ng-include="'navProject.html'"></div>
        <div class="content-wrapper">
            <span style="float: right;margin-top: 7px;" class="fa fa-times-circle fa-2x"
                  ng-click="newStorageConnectorCtrl.exitToFeaturestore()"
                  uib-tooltip="Clear state and go back to Feature Store main page."> </span>
            <h2 style="margin-bottom: 30px;color:#555"
                ng-if="newStorageConnectorCtrl.storageConnectorOperation === 'CREATE'">
                Create Storage Connector for Feature Store Data
                <i class="fa fa-info-circle" tooltip-placement="auto left" uib-tooltip='The storage connector can be used to manage feature data in external storage backends,
                   such as S3 or DB2 (over JDBC).'></i>
            </h2>

            <h2 style="margin-bottom: 30px;color:#555"
                ng-if="newStorageConnectorCtrl.storageConnectorOperation === 'UPDATE'">
                Update Storage Connector: <span
                    style="font-weight:700">{{newStorageConnectorCtrl.storageConnectorName}}</span>
            </h2>

            <div uib-accordion close-others="false">
                <div uib-accordion-group class="panel-default" is-open="newStorageConnectorCtrl.accordion1.isOpen">
                    <div uib-accordion-heading>
                        <i class="fa fa-info-circle" tooltip-placement="auto left"
                           uib-tooltip='The name of the Storage Connector for the Feature Store'></i>
                        <span style="margin-left: 20px">
                            {{newStorageConnectorCtrl.accordion1.title}}
                            {{newStorageConnectorCtrl.accordion1.value}}
                        </span>
                        <span ng-if="newStorageConnectorCtrl.storageConnectorNameWrongValue === -1"
                              class="glyphicon glyphicon-alert" tooltip-placement="auto left"
                              uib-tooltip='The provided Storage Connector Name is not valid'
                              style="margin-left: 10px"></span>
                    </div>
                    <input type="text" class="form-control" placeholder="Enter a name for the storage connector"
                           value="newStorageConnectorCtrl.storageConnectorName"
                           ng-model="newStorageConnectorCtrl.storageConnectorName"
                           ng-change="newStorageConnectorCtrl.nameFilledIn()" autofocus
                           ng-disabled="newStorageConnectorCtrl.storageConnectorOperation === 'UPDATE'">
                    <div ng-if="newStorageConnectorCtrl.storageConnectorNameWrongValue === -1" style="color: red">
                        <p>
                            Storage Connector name shouldn't be empty and can only contain alphanumeric characters and
                            underscores,
                            maximum length is {{newStorageConnectorCtrl.storageConnectorNameMaxLength}} characters.
                        </p>
                    </div>
                    <div ng-if="newStorageConnectorCtrl.storageConnectorNameNotUnique === -1" style="color: red">
                        <p>
                            The provided storage connector name already exist in this feature store.
                        </p>
                    </div>
                </div>

                <div uib-accordion-group class="panel-default" is-open="newStorageConnectorCtrl.accordion2.isOpen">
                    <div uib-accordion-heading>
                        <i class="fa fa-info-circle" tooltip-placement="auto left"
                           uib-tooltip='The description of the Storage Connector for the Feature Store'></i>
                        <span style="margin-left: 20px">
                            {{newStorageConnectorCtrl.accordion2.title}}
                            {{newStorageConnectorCtrl.accordion2.value}}
                        </span>
                        <span ng-if="newStorageConnectorCtrl.storageConnectorDescriptionWrongValue === -1"
                              class="glyphicon glyphicon-alert" tooltip-placement="auto left"
                              uib-tooltip='The provided Storage Connector description is not valid'
                              style="margin-left: 10px"></span>
                    </div>
                    <input type="text" class="form-control" placeholder="Enter a description for the storage connector"
                           value="newStorageConnectorCtrl.storageConnectorDescription"
                           ng-model="newStorageConnectorCtrl.storageConnectorDescription"
                           ng-change="newStorageConnectorCtrl.descriptionFilledIn()" autofocus>
                    <div ng-if="newStorageConnectorCtrl.storageConnectorDescriptionWrongValue === -1"
                         style="color: red">
                    </div>
                </div>

                <div uib-accordion-group class="panel-default" is-open="newStorageConnectorCtrl.accordion3.isOpen">
                    <div uib-accordion-heading>
                        <i class="fa fa-info-circle" tooltip-placement="auto left"
                           uib-tooltip='The description of the Storage Connector for the Feature Store'></i>
                        <span style="margin-left: 20px">
                            {{newStorageConnectorCtrl.accordion3.title}}
                            {{newStorageConnectorCtrl.accordion3.value}}
                        </span>
                        <span ng-if="newStorageConnectorCtrl.storageConnectorConfigWrongValue === -1"
                              class="glyphicon glyphicon-alert" tooltip-placement="auto left"
                              uib-tooltip='The provided Storage Connector description is not valid'
                              style="margin-left: 10px"></span>
                    </div>

                    <div class="view-info" ng-if="newStorageConnectorCtrl.storageConnectorOperation === 'CREATE'">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                </div>
                                <div class="col-sm-9">
                                    <div class="btn-group blocks" style="padding: 0px;">
                                        <div style="display: inline-block; vertical-align: top;">
                                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                                <label class="btn btn-default btn-md" id="jdbc_connector_lbl"
                                                       ng-click="newStorageConnectorCtrl.setStorageConnectorType(0);"
                                                       ng-class="{unset: newStorageConnectorCtrl.storageConnectorType !== 0}"
                                                       style="margin:2px; background:rgb(108, 117, 125); color:white; z-index:2">
                                                    <input type="radio" value="JDBC_CONNECTION_BTN"
                                                           id="JDBC_CONNECTION_BTN">
                                                    JDBC
                                                    <i class="fa fa-info-circle"
                                                       uib-tooltip="Define a connection to a JDBC connector"
                                                       tooltip-placement="left" style="margin-left: 10px">
                                                    </i>
                                                </label>
                                                <label class="btn btn-default btn-md" id="redshift_connector_lbl"
                                                       ng-click="newStorageConnectorCtrl.setStorageConnectorType(3);"
                                                       ng-class="{unset: newStorageConnectorCtrl.storageConnectorType !== 3}"
                                                       style="margin:2px; background:rgb(108, 117, 125); color:white; z-index:2">
                                                    <input type="radio" value="REDSHIFT_CONNECTION_BTN"
                                                           id="REDSHIFT_CONNECTION_BTN">
                                                    Redshift
                                                    <i class="fa fa-info-circle"
                                                       uib-tooltip="Define a connection to a Redshift connector"
                                                       tooltip-placement="left" style="margin-left: 10px">
                                                    </i>
                                                </label>
                                                <label class="btn btn-default btn-md" id="s3_connection_lbl"
                                                       ng-click="newStorageConnectorCtrl.setStorageConnectorType(1);"
                                                       ng-class="{unset: newStorageConnectorCtrl.storageConnectorType !== 1}"
                                                       style="margin:2px; background:rgb(108, 117, 125); color:white; z-index:2">
                                                    <input type="radio" value="S3_CONNECTION_BTN"
                                                           id="S3_CONNECTION_BTN">
                                                    S3
                                                    <i class="fa fa-info-circle"
                                                       uib-tooltip="Define a connection to a S3 connector"
                                                       tooltip-placement="left" style="margin-left: 10px">
                                                    </i>
                                                </label>

                                                <label class="btn btn-default btn-md" id="HopsFS_connection_lbl"
                                                       ng-click="newStorageConnectorCtrl.setStorageConnectorType(2);"
                                                       ng-class="{unset: newStorageConnectorCtrl.storageConnectorType !== 2}"
                                                       style="margin:2px; background:rgb(108, 117, 125); color:white; z-index:2">
                                                    <input type="radio" value="HOPSFS_CONNECTION_BTN"
                                                           id="HopsFS_CONNECTION_BTN">
                                                    HopsFS
                                                    <i class="fa fa-info-circle"
                                                       uib-tooltip="Define a HopsFS dataset as a connector for the feature store "
                                                       tooltip-placement="left" style="margin-left: 10px">
                                                    </i>
                                                </label>

                                                <label class="btn btn-default btn-md" id="adls_connection_lbl"
                                                       ng-click="newStorageConnectorCtrl.setStorageConnectorType(4);"
                                                       ng-class="{unset: newStorageConnectorCtrl.storageConnectorType !== 4}"
                                                       style="margin:2px; background:rgb(108, 117, 125); color:white; z-index:2">
                                                    <input type="radio" value="ADLS_CONNECTION_BTN"
                                                           id="ADLS_CONNECTION_BTN">
                                                    Azure Data Lake
                                                    <i class="fa fa-info-circle"
                                                       uib-tooltip="Define an Azure Data Lake Storage connector"
                                                       tooltip-placement="left" style="margin-left: 10px">
                                                    </i>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info" ng-if="newStorageConnectorCtrl.storageConnectorType === 0">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">JDBC Connection String:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto left" uib-tooltip='The JDBC Connection String e.g
                                       "jdbc:hopshive://hopsworks0:9084/demo_featurestore_admin000_featurestore.db;". This string will be
                                       visible for all project members' style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" placeholder="Enter a JDBC connection string"
                                           ng-model="newStorageConnectorCtrl.jdbcConnectionString">
                                    <div ng-if="newStorageConnectorCtrl.storageConnectorJdbcStringWrongValue === -1"
                                         style="color: red">
                                        <p>
                                            The JDBC connection string should not be empty and should be less than
                                            {{newStorageConnectorCtrl.jdbcStorageConnectorConnectionStringMaxLength}}
                                            characters"
                                        </p>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div data-ng-repeat="jdbcArgument in newStorageConnectorCtrl.jdbcArguments track by $index"
                         ng-if="newStorageConnectorCtrl.storageConnectorType === 0">
                        <div class="view-info">
                            <div class="col-md-12">
                                <div class="col-sm-12" style="margin-bottom: 20px">
                                    <div class="col-sm-3">
                                        <label class="control-label">JDBC Argument</label>
                                        <i class="fa fa-info-circle" tooltip-placement="auto left"
                                           uib-tooltip='An argument/parameter to complement the JDBC string at run-time (e.g password field)'
                                           style="margin-left: 10px"></i>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="input-group">
                                            <input type="text" class="form-control"
                                                   placeholder="Enter the name of the argument {{$index + 1}}"
                                                   value="{{jdbcArgument}}"
                                                   ng-model="newStorageConnectorCtrl.jdbcArguments[$index]">
                                            <span class="input-group-btn">
                                            <button class="btn btn-danger fa fa-trash-o icon-resize-small"
                                                    type="button"
                                                    title="Remove JDBC Argument"
                                                    ng-click="newStorageConnectorCtrl.removeJdbcArgument($index)"></button>
                                          </span>
                                        </div>
                                        <div ng-if="newStorageConnectorCtrl.jdbcArgumentsWrongValue[$index] === -1"
                                             style="color: red">{{"" + "JDBC argument name should not be empty"}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info" ng-if="newStorageConnectorCtrl.storageConnectorType === 0">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <button type="button" ng-click="newStorageConnectorCtrl.addJdbcArgument()"
                                            uib-tooltip="Add an argument/parameter to the JDBC string that can be complemented at
                            runtime (e.g a password or TLS certificate parameter)"
                                            class="btn btn-sm btn-default btn-success control-label" style="margin-bottom:
                            10px">
                                        Add Argument<i style="margin-left: 10px" class="glyphicon glyphicon-plus">
                                    </i>
                                    </button>
                                </div>
                                <div class="col-sm-9">
                                </div>
                            </div>
                        </div>
                        <div ng-if="newStorageConnectorCtrl.jdbcArgumentsNotUnique === -1" style="color: red">
                            <p>
                                JDBC connector argument names should be unique.
                            </p>
                        </div>
                    </div>
                    <div class="view-info" ng-if="newStorageConnectorCtrl.storageConnectorType === 1">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">S3 Bucket:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto left"
                                       uib-tooltip='The S3 bucket name without the URI scheme: s3a://'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" placeholder="Enter an S3 bucket"
                                           ng-model="newStorageConnectorCtrl.s3Bucket">
                                    <div ng-if="newStorageConnectorCtrl.storageConnectorS3BucketWrongValue === -1"
                                         style="color: #ff0000">
                                        The S3 Bucket should not be empty and should be less than
                                        {{newStorageConnectorCtrl.s3StorageConnectorBucketMaxLength}} characters
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info"
                         ng-if="newStorageConnectorCtrl.storageConnectorType === 1">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">S3 Bucket Encryption:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto left"
                                       uib-tooltip='S3 Bucket Encryption' style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-9">
                                    <md-checkbox
                                            class="row md-primary"
                                            ng-class="{true: 'md-checked'}[newStorageConnectorCtrl.s3BucketEncryption == true]"
                                            ng-click="newStorageConnectorCtrl.toggleS3BucketEncryptionInputFields()">
                                    </md-checkbox>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info"
                         ng-if="newStorageConnectorCtrl.storageConnectorType === 1 && newStorageConnectorCtrl.s3BucketEncryption">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">S3 Server Encryption Algorithm:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto left"
                                       uib-tooltip='S3 Server Encryption Algorithm' style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-9">
                                    <md-radio-group class="md-primary pull-left"
                                                    ng-model="newStorageConnectorCtrl.s3ServerEncryptionAlgorithm">
                                        <md-radio-button
                                                ng-repeat="m in newStorageConnectorCtrl.s3ServerEncryptionAlgorithmAlgorithms"
                                                uib-tooltip="{{m.description}}"
                                                ng-value="m.value"
                                                ng-click="newStorageConnectorCtrl.toggleS3BucketEncryptionKeyInputField(m.requiresKey)">
                                            {{m.algorithm}}
                                        </md-radio-button>
                                    </md-radio-group>
                                    <div ng-if="newStorageConnectorCtrl.storageConnectorS3ServerEncryptionAlgorithmWrongValue === -1"
                                         style="color: red">
                                        <p>
                                            Please select encryption algorithm
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info"
                         ng-if="newStorageConnectorCtrl.storageConnectorType === 1 && newStorageConnectorCtrl.s3BucketEncryption
                         && newStorageConnectorCtrl.s3BucketEncryptionRequiresKey">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">S3 Server Encryption Key:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto left"
                                       uib-tooltip='The S3 Server Encryption Key' style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control"
                                           placeholder="Enter an S3 Server Encryption Key"
                                           ng-model="newStorageConnectorCtrl.s3ServerEncryptionKey">
                                    <div
                                            ng-if="newStorageConnectorCtrl.storageConnectorS3ServerEncryptionKeyWrongValue === -1"
                                            style="color: red">
                                        <p>
                                            The S3 server encryption key should not be empty and longer than
                                            {{newStorageConnectorCtrl.s3ServerEncryptionKeyMaxLength}}
                                            characters
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info"
                         ng-if="newStorageConnectorCtrl.storageConnectorType === 1 && !newStorageConnectorCtrl.s3IAMRole">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Authentication method:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='AWS Access/Secret keys or IAM role'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-3">
                                    <select class="form-control" id="sel1"
                                            ng-model="newStorageConnectorCtrl.s3BucketAuth"
                                            ng-options="obj.id as obj.name for obj in newStorageConnectorCtrl.s3BucketAuthMethods">
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info"
                         ng-if="newStorageConnectorCtrl.storageConnectorType === 1 && !newStorageConnectorCtrl.s3IAMRole && newStorageConnectorCtrl.s3BucketAuth == 0">
                        <div class="view-info"
                             ng-if="newStorageConnectorCtrl.storageConnectorType === 1 && !newStorageConnectorCtrl.s3IAMRole">
                            <div class="col-md-12">
                                <div class="col-sm-12" style="margin-bottom: 20px">
                                    <div class="col-sm-3">
                                        <label class="control-label">S3 Access Key:</label>
                                        <i class="fa fa-info-circle" tooltip-placement="auto left"
                                           uib-tooltip='The S3 access key' style="margin-left: 10px"></i>
                                    </div>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control" placeholder="Enter an S3 access key"
                                               ng-model="newStorageConnectorCtrl.s3AccessKey">
                                        <div ng-if="newStorageConnectorCtrl.storageConnectorS3AccessKeyWrongValue === -1"
                                             style="color: red">
                                            <p>
                                                The Access Key should not be empty and longer than
                                                {{newStorageConnectorCtrl.s3StorageConnectorAccesskeyMaxLength}} characters
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="view-info"
                             ng-if="newStorageConnectorCtrl.storageConnectorType === 1 && !newStorageConnectorCtrl.s3IAMRole">
                            <div class="col-md-12">
                                <div class="col-sm-12" style="margin-bottom: 20px">
                                    <div class="col-sm-3">
                                        <label class="control-label">S3 Secret Key:</label>
                                        <i class="fa fa-info-circle" tooltip-placement="auto left"
                                           uib-tooltip='The S3 secret key' style="margin-left: 10px"></i>
                                    </div>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control" placeholder="Enter an S3 secret key"
                                               ng-model="newStorageConnectorCtrl.s3SecretKey">
                                        <div ng-if="newStorageConnectorCtrl.storageConnectorS3SecretKeyWrongValue === -1"
                                             style="color: red">
                                            <p>
                                                The Secret Key should not be empty and longer than
                                                {{newStorageConnectorCtrl.s3StorageConnectorSecretkeyMaxLength}}
                                                characters
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info"
                         ng-if="newStorageConnectorCtrl.storageConnectorType === 1 && newStorageConnectorCtrl.s3BucketAuth == 1">
                        <div class="col-md-12">
                        <div class="col-sm-12" style="margin-bottom: 20px">
                            <div class="col-sm-3">
                                <label class="control-label">Available IAM roles:</label>
                                <i class="fa fa-info-circle" tooltip-placement="auto right"
                                   uib-tooltip='IAM role that will be used to get temporary credentials'
                                   style="margin-left: 10px"></i>
                            </div>
                            <div class="col-sm-3">
                                <select class="form-control" id="sel" ng-model="newStorageConnectorCtrl.s3AWSRole">
                                    <option value="" selected disabled>Select IAM role</option>
                                    <option ng-if="newStorageConnectorCtrl.s3IAMRole" value="">Instance Role
                                    </option>
                                    <option ng-repeat="mapping in newStorageConnectorCtrl.cloudRoleMappings">{{mapping.cloudRole}}</option>
                                </select>
                            </div>
                            <div class="col-sm-6" ng-if="newStorageConnectorCtrl.s3AWSRoleWrongValue === -1"
                                 style="color: red">
                                <p>
                                   You need to select a role to use for temporary credentials.
                                </p>
                            </div>
                        </div>
                        </div>
                    </div>
                    <div class="view-info" ng-if="newStorageConnectorCtrl.storageConnectorType === 2">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">HopsFS Dataset:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='Select a Dataset in your project' style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-9">
                                    <ui-select ng-model="newStorageConnectorCtrl.hopsFsDataset" style="z-index: 100">
                                        <ui-select-match placeholder="Select a Dataset in your project">
                                            <span>{{$select.selected.name}}</span>
                                        </ui-select-match>
                                        <ui-select-choices repeat="dataset in newStorageConnectorCtrl.datasets">
                                            <span ng-bind="dataset.name"></span>
                                        </ui-select-choices>
                                    </ui-select>
                                    <div ng-if="newStorageConnectorCtrl.storageConnectorHopsfsDatasetWrongValue === -1"
                                         style="color: red">
                                        <p>
                                            You must select a HopsFS Dataset
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="view-info" ng-if="newStorageConnectorCtrl.storageConnectorType === 3">
                        <form role="form" id="redshiftConnectorForm"
                              ng-submit="newStorageConnectorCtrl.submitRedshiftConnector()"
                              novalidate class="form-validate">
                          <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Cluster identifier:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='The identifier must be from 1-63 characters. Valid characters are a-z (lowercase only) and - (hyphen).'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control"
                                           placeholder="Enter a Redshift cluster connection string"
                                           ng-model="newStorageConnectorCtrl.redshiftClusterIdentifier"
                                           ng-minlength="1"
                                           ng-maxlength="63"
                                           required>
                                </div>
                            </div>
                              <div class="col-sm-12" style="margin-bottom: 20px">
                                  <div class="col-sm-3">
                                      <label class="control-label">Database driver:</label>
                                      <i class="fa fa-info-circle" tooltip-placement="auto right"
                                         uib-tooltip='The driver name of the Amazon Redshift database JDBC/ODBC driver.'
                                         style="margin-left: 10px"></i>
                                  </div>
                                  <div class="col-sm-4">
                                      <input type="text" class="form-control"
                                             placeholder="Enter Database driver. ex. com.amazon.redshift.jdbc42.Driver"
                                             ng-model="newStorageConnectorCtrl.redshiftDatabaseDriver"
                                             ng-minlength="1"
                                             ng-maxlength="64">
                                  </div>
                              </div>
                              <div class="col-sm-12" style="margin-bottom: 20px">
                                  <div class="col-sm-3">
                                      <label class="control-label">Database endpoint:</label>
                                      <i class="fa fa-info-circle" tooltip-placement="auto right"
                                         uib-tooltip='The endpoint of the Amazon Redshift cluster.'
                                         style="margin-left: 10px"></i>
                                  </div>
                                  <div class="col-sm-4">
                                      <input type="text" class="form-control"
                                             placeholder="Enter Database endpoint ex. abc123xyz789.us-west-2.redshift.amazonaws.com"
                                             ng-model="newStorageConnectorCtrl.redshiftDatabaseEndpoint"
                                             ng-minlength="1"
                                             ng-maxlength="64">
                                  </div>
                              </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Database name:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='The name must be 1-64 alphanumeric characters (lowercase only).'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control"
                                           placeholder="Enter Database name"
                                           ng-model="newStorageConnectorCtrl.redshiftDatabaseName"
                                           ng-minlength="1"
                                           ng-maxlength="64">
                                </div>
                            </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Database port:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='The port must be numeric (1150-65535).'
                                       style="margin-left: 10px">
                                    </i>
                                </div>
                                <div class="col-sm-1">
                                    <input type="number" class="form-control"
                                           placeholder="5439"
                                           ng-model="newStorageConnectorCtrl.redshiftDatabasePort"
                                           min="1150" max="65535">
                                </div>
                            </div>
                              <div class="col-sm-12" style="margin-bottom: 20px">
                                  <div class="col-sm-3">
                                      <label class="control-label">Table name:</label>
                                      <i class="fa fa-info-circle" tooltip-placement="auto right"
                                         uib-tooltip='Default table name.'
                                         style="margin-left: 10px"></i>
                                  </div>
                                  <div class="col-sm-3">
                                      <input type="text" class="form-control"
                                             placeholder="Enter Table name"
                                             ng-model="newStorageConnectorCtrl.redshiftTableName"
                                             ng-minlength="0"
                                             ng-maxlength="128">
                                  </div>
                              </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Database user name:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='The name must be 1-128 alphanumeric characters.'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control"
                                           placeholder="Enter Database user name"
                                           ng-model="newStorageConnectorCtrl.redshiftDatabaseUserName"
                                           ng-minlength="1"
                                           ng-maxlength="128">
                                </div>

                                <div class="col-sm-3">
                                    <label class="control-label">Auto create:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='Create a database user with the name specified for the user named in
                                        Database user name if one does not exist.'
                                       style="margin-left: 10px; margin-right: 30px"></i>
                                    <md-checkbox
                                            class="row md-primary"
                                            ng-model="newStorageConnectorCtrl.redshiftAutoCreate"
                                            style="min-height: auto;">
                                    </md-checkbox>
                                </div>
                            </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Database user password:</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='The password can only contain ASCII characters (ASCII codes 33-126),
                                        except single quotation mark, double quotation mark, /, \, or @.'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group has-feedback">
                                        <input type="password" class="form-control"
                                               placeholder="Enter Database user password"
                                               ng-model="newStorageConnectorCtrl.redshiftDatabasePassword" show-hide-password>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                              <div class="col-sm-3">
                                  <label class="control-label">Database Groups:</label>
                                  <i class="fa fa-info-circle" tooltip-placement="auto right"
                                     uib-tooltip='A list of (colon-separated) names of existing database groups that the user named in
                                      Database user name will join for the current session, in addition to any group memberships for
                                      an existing user. If not specified, a new user is added only to PUBLIC.'
                                     style="margin-left: 10px"></i>
                              </div>
                              <div class="col-sm-3">
                                  <div class="form-group has-feedback">
                                      <input type="text" class="form-control"
                                             placeholder="Enter Database groups"
                                             ng-model="newStorageConnectorCtrl.redshiftDatabaseGroup"
                                             ng-maxlength="2048">
                                  </div>
                              </div>
                            </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                              <div class="col-sm-3">
                                  <label class="control-label">Available IAM roles:</label>
                                  <i class="fa fa-info-circle" tooltip-placement="auto right"
                                     uib-tooltip='IAM role that will be used to get temporary credentials'
                                     style="margin-left: 10px"></i>
                              </div>
                              <div class="col-sm-3">
                                  <select class="form-control" id="role"
                                          ng-model="newStorageConnectorCtrl.redshiftIAMRole">
                                      <option value="" selected>Select IAM role</option>
                                      <option ng-repeat="mapping in newStorageConnectorCtrl.cloudRoleMappings">{{mapping.cloudRole}}</option>
                                  </select>
                              </div>
                            </div>
                            <div data-ng-repeat="redshiftArgument in newStorageConnectorCtrl.redshiftArguments track by $index">
                              <div class="col-sm-12" style="margin-bottom: 20px">
                                  <div class="col-sm-3">
                                      <label class="control-label">Redshift Property</label>
                                      <i class="fa fa-info-circle" tooltip-placement="auto right"
                                         uib-tooltip='[Property1]=[Value]'
                                         style="margin-left: 10px"></i>
                                  </div>
                                  <div class="col-sm-3">
                                      <div class="input-group">
                                          <input type="text" class="form-control"
                                                 placeholder="Enter property {{$index + 1}}"
                                                 value="{{redshiftArgument}}"
                                                 ng-model="newStorageConnectorCtrl.redshiftArguments[$index]">
                                          <span class="input-group-btn">
                                            <button class="btn btn-danger fa fa-trash-o icon-resize-small"
                                                  type="button"
                                                  title="Delete"
                                                  ng-click="newStorageConnectorCtrl.redshiftArguments.splice($index, 1)"></button>
                                          </span>
                                      </div>
                                  </div>
                              </div>
                            </div>
                            <div class="view-info">
                                  <div class="col-md-12">
                                      <div class="col-sm-12" style="margin-bottom: 20px">
                                          <div class="col-sm-3">
                                              <button type="button"
                                                      ng-click="newStorageConnectorCtrl.redshiftArguments.push('')"
                                                      uib-tooltip="Add additional properties like SSL authentication"
                                                      class="btn btn-sm btn-default btn-success control-label" style="margin-bottom:
                            10px">
                                                  Add Argument<i style="margin-left: 10px" class="glyphicon glyphicon-plus">
                                              </i>
                                              </button>
                                          </div>
                                          <div class="col-sm-9">
                                          </div>
                                      </div>
                                  </div>
                                  <div ng-if="newStorageConnectorCtrl.redshiftArgumentsNotUnique === -1" style="color: red">
                                      <p>
                                          Redshift connector property names should be unique.
                                      </p>
                                  </div>
                            </div>
                        </div>
                        </form>
                    </div>

                    <div class="view-info" ng-if="newStorageConnectorCtrl.storageConnectorType === 4">
                        <div class="col-md-12">
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Generation</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='Azure Data Lake Storage Generation'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-4">
                                    <input type="radio" id="gen1" name="generation" value="1" ng-model="newStorageConnectorCtrl.generation">
                                    <label for="gen1" style="margin-right: 20px;">1</label>
                                    <input type="radio" id="gen2" name="generation" value="2"
                                    ng-model="newStorageConnectorCtrl.generation">
                                    <label for="gen2">2</label>   
                                </div>
                            </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Directory Id</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='ID that uniquely identifies the Azure AD instance'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control"
                                           placeholder="Enter Directory ID"
                                           ng-model="newStorageConnectorCtrl.directoryId"
                                           required>
                                </div>
                            </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Application Id</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='ID that uniquely identifies the application'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control"
                                           placeholder="Enter Application ID"
                                           ng-model="newStorageConnectorCtrl.applicationId"
                                           required>
                                </div>
                            </div>
                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Service Credential</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='String that the application uses to prove its identity'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control"
                                           placeholder="Enter Service Credential"
                                           ng-model="newStorageConnectorCtrl.serviceCredential"
                                           required>
                                </div>
                            </div>

                            <div class="col-sm-12" style="margin-bottom: 20px">
                                <div class="col-sm-3">
                                    <label class="control-label">Account Name</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='The name of the storage account'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control"
                                           placeholder="Enter Account Name"
                                           ng-model="newStorageConnectorCtrl.accountName"
                                           required>
                                </div>
                            </div>

                            <div class="col-sm-12" style="margin-bottom: 20px" ng-show="newStorageConnectorCtrl.generation === '2'">
                                <div class="col-sm-3">
                                    <label class="control-label">Container Name</label>
                                    <i class="fa fa-info-circle" tooltip-placement="auto right"
                                       uib-tooltip='The name of the container where to store the data'
                                       style="margin-left: 10px"></i>
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control"
                                           placeholder="Enter Container Name"
                                           ng-model="newStorageConnectorCtrl.containerName"
                                           required>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div uib-accordion-group class="panel-default" is-open="newStorageConnectorCtrl.accordion4.isOpen">
                    <div uib-accordion-heading>
                        <i class="fa fa-info-circle" tooltip-placement="auto left"
                           uib-tooltip='Create the new Storage Connector'></i>
                        <span style="margin-left: 20px">
                            {{newStorageConnectorCtrl.accordion4.title}}
                            {{newStorageConnectorCtrl.accordion4.value}}
                        </span>
                    </div>
                    <div class="row" ng-if="newStorageConnectorCtrl.storageConnectorType !== 3">
                        <div class="col-sm-1">
                            <button ng-click="newStorageConnectorCtrl.createStorageConnector()"
                                    class="btn btn-default btn-success"
                                    ng-if="newStorageConnectorCtrl.storageConnectorOperation === 'CREATE'">
                                Create
                                <i ng-if="newStorageConnectorCtrl.working" style="margin-top: 2px"
                                   class="fa fa-spinner fa-spin pull-right"></i>
                            </button>
                            <button ng-click="newStorageConnectorCtrl.updateStorageConnector()"
                                    class="btn btn-default btn-success"
                                    ng-if="newStorageConnectorCtrl.storageConnectorOperation === 'UPDATE'">
                                Update
                                <i ng-if="newStorageConnectorCtrl.working" style="margin-top: 2px"
                                   class="fa fa-spinner fa-spin pull-right"></i>
                            </button>
                        </div>
                        <div class="col-sm-4 alert alert-warning" role="alert"
                             ng-show="newStorageConnectorCtrl.wrong_values === -1">
                            There are errors in your input configuration, see error messages above.
                        </div>
                        <div class="col-sm-7">
                        </div>
                    </div>
                    <div class="row" ng-if="newStorageConnectorCtrl.storageConnectorType === 3">
                        <div class="col-sm-1">
                            <button type="submit"
                                    form="redshiftConnectorForm"
                                    class="btn btn-default btn-success"
                                    ng-if="newStorageConnectorCtrl.storageConnectorOperation === 'CREATE'">
                                Create
                                <i ng-if="newStorageConnectorCtrl.working" style="margin-top: 2px"
                                   class="fa fa-spinner fa-spin pull-right"></i>
                            </button>
                            <button type="submit"
                                    form="redshiftConnectorForm"
                                    class="btn btn-default btn-success"
                                    ng-if="newStorageConnectorCtrl.storageConnectorOperation === 'UPDATE'">
                                Update
                                <i ng-if="newStorageConnectorCtrl.working" style="margin-top: 2px"
                                   class="fa fa-spinner fa-spin pull-right"></i>
                            </button>
                        </div>
                        <div class="col-sm-11">
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>
<!-- /#wrapper -->